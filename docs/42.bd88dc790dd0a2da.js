"use strict";(self.webpackChunkE_Commerce=self.webpackChunkE_Commerce||[]).push([[42],{42:(R,p,d)=>{d.r(p),d.d(p,{AdminModule:()=>M});var a=d(6814),g=d(9310),t=d(4946),u=d(5516),m=d(9862);let _=(()=>{class o{constructor(e){this._HttpClient=e}getCart(){return this._HttpClient.get(u.N.baseURL+"carts")}deleteCart(e){return this._HttpClient.delete(u.N.baseURL+"carts/"+e)}getSingleCart(e){return this._HttpClient.get(u.N.baseURL+"carts/"+e)}static#t=this.\u0275fac=function(r){return new(r||o)(t.LFG(m.eN))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function h(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"th",13),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td")(8,"span",14),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.delete(s))}),t._uU(9,"Delete"),t.qZA(),t.TgZ(10,"span",15),t.NdJ("click",function(){const s=t.CHM(e).index,c=t.oxw();return t.KtG(c.view(s+1))}),t._uU(11,"View"),t.qZA()()()}if(2&o){const e=n.$implicit,r=n.index;t.xp6(2),t.Oqu(r+1),t.xp6(2),t.hij("",e.total," $"),t.xp6(2),t.Oqu(e.totalQuantity)}}function Z(o,n){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._UZ(2,"img",16),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t._UZ(11,"td"),t.qZA()),2&o){const e=n.$implicit;t.xp6(2),t.Q6J("src",e.thumbnail,t.LSH),t.xp6(2),t.Oqu(e.title),t.xp6(2),t.hij("",e.price," $"),t.xp6(2),t.hij(" ",e.quantity," "),t.xp6(2),t.hij("",+e.price*e.quantity," $")}}let f=(()=>{class o{constructor(e){this._CartService=e,this.carts=[],this.cartDetails={discountedTotal:0,id:0,products:[],total:0,totalProducts:0,totalQuantity:0,userId:0,quantity:0},this.getAllCarts()}getAllCarts(){this._CartService.getCart().subscribe({next:e=>{this.carts=e.carts,console.log(e)}})}delete(e){this._CartService.deleteCart(e.id).subscribe({next:r=>{console.log(r)}})}view(e){this._CartService.getSingleCart(e).subscribe({next:r=>{this.cartDetails=r,console.log(r)}})}static#t=this.\u0275fac=function(r){return new(r||o)(t.Y36(_))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-cart"]],decls:47,vars:3,consts:[[1,"p-3","border","border-1","my-4","text-center"],[1,"my-3"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["tabindex","-1","id","view",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered",2,"max-width","900px !important"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"table","table-hover","text-center"],["scope","row"],[1,"btn","btn-danger","p-2","mx-2",3,"click"],["data-bs-toggle","modal","data-bs-target","#view",1,"btn","btn-info","p-2",3,"click"],["width","35","height","35",3,"src"]],template:function(r,i){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"table",2)(3,"thead")(4,"tr")(5,"th",3),t._uU(6,"#"),t.qZA(),t.TgZ(7,"th",3),t._uU(8,"Total"),t.qZA(),t.TgZ(9,"th",3),t._uU(10,"Total Quantity"),t.qZA(),t._UZ(11,"th",3),t.qZA()(),t.TgZ(12,"tbody"),t.YNc(13,h,12,3,"tr",4),t.qZA()()()(),t.TgZ(14,"div",5)(15,"div",6)(16,"div",7)(17,"div",8)(18,"h5",9),t._uU(19,"Cart Details"),t.qZA(),t._UZ(20,"button",10),t.qZA(),t.TgZ(21,"div",11)(22,"table",12)(23,"thead")(24,"tr"),t._UZ(25,"th"),t.TgZ(26,"th"),t._uU(27,"title"),t.qZA(),t.TgZ(28,"th"),t._uU(29,"Price"),t.qZA(),t.TgZ(30,"th"),t._uU(31,"Quantity"),t.qZA(),t.TgZ(32,"th"),t._uU(33,"Total"),t.qZA(),t._UZ(34,"th"),t.qZA()(),t.TgZ(35,"tbody"),t.YNc(36,Z,12,5,"tr",4),t.TgZ(37,"tr"),t._UZ(38,"td")(39,"td")(40,"td")(41,"td"),t.TgZ(42,"td")(43,"strong"),t._uU(44,"Total"),t.qZA(),t._uU(45),t.qZA(),t._UZ(46,"td"),t.qZA()()()()()()()),2&r&&(t.xp6(13),t.Q6J("ngForOf",i.carts),t.xp6(23),t.Q6J("ngForOf",i.cartDetails.products),t.xp6(9),t.hij(" : ",i.cartDetails.total," $"))},dependencies:[a.sg],styles:["td[_ngcontent-%COMP%], th[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{height:80px;text-align:center;vertical-align:middle}"]})}return o})();var l=d(95);let b=(()=>{class o{constructor(e){this._HttpClient=e}getAllProducts(){return this._HttpClient.get(u.N.baseURL+"products")}addProduct(e){return this._HttpClient.post(u.N.baseURL+"products/add",e)}getProductDetails(e){return this._HttpClient.get(u.N.baseURL+`products/${e}`)}updateProduct(e,r){return this._HttpClient.put(u.N.baseURL+"products/"+r,e)}static#t=this.\u0275fac=function(r){return new(r||o)(t.LFG(m.eN))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var C=d(7621);function A(o,n){if(1&o&&(t.TgZ(0,"option",3),t._uU(1),t.qZA()),2&o){const e=n.$implicit,r=t.oxw();t.Q6J("selected",e===r.selected)("value",e),t.xp6(1),t.Oqu(e)}}let T=(()=>{class o{constructor(e){this._ProductService=e,this.selectedCat=new t.vpe,this.selected="",this.allCategories=[],this.getCategories()}sendCat(e){this.selectedCat.emit(e.target.value)}getCategories(){this._ProductService.getCategories().subscribe({next:e=>{this.allCategories=e,this.allCategories.splice(6,this.allCategories.length-1)}})}static#t=this.\u0275fac=function(r){return new(r||o)(t.Y36(C.s))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-selector"]],inputs:{selected:"selected"},outputs:{selectedCat:"selectedCat"},decls:4,vars:1,consts:[["id","category",1,"form-control",3,"change"],["value","all"],[3,"selected","value",4,"ngFor","ngForOf"],[3,"selected","value"]],template:function(r,i){1&r&&(t.TgZ(0,"select",0),t.NdJ("change",function(c){return i.sendCat(c)}),t.TgZ(1,"option",1),t._uU(2,"All"),t.qZA(),t.YNc(3,A,2,3,"option",2),t.qZA()),2&r&&(t.xp6(3),t.Q6J("ngForOf",i.allCategories))},dependencies:[a.sg,l.YN,l.Kr]})}return o})();function v(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._UZ(2,"img",30),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td",31),t.NdJ("click",function(){const s=t.CHM(e).index,c=t.oxw();return t.KtG(c.showProduct(s+1))}),t._uU(10,"Update"),t.qZA()()}if(2&o){const e=n.$implicit;t.xp6(2),t.Q6J("src",e.thumbnail,t.LSH),t.xp6(2),t.Oqu(e.title),t.xp6(2),t.hij("",e.price," $"),t.xp6(2),t.hij(" ",e.category," ")}}function U(o,n){1&o&&(t.TgZ(0,"p",32),t._uU(1,"Title is "),t.TgZ(2,"strong"),t._uU(3,"Required"),t.qZA()())}function q(o,n){1&o&&(t.TgZ(0,"p",32),t._uU(1,"minlength is "),t.TgZ(2,"strong"),t._uU(3,"4"),t.qZA()())}function x(o,n){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,U,4,0,"p",21),t.YNc(2,q,4,0,"p",21),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.title?null:e.title.getError("required")),t.xp6(1),t.Q6J("ngIf",null==e.title?null:e.title.getError("minlength"))}}function y(o,n){1&o&&(t.TgZ(0,"p",32),t._uU(1,"Price is "),t.TgZ(2,"strong"),t._uU(3,"Required"),t.qZA()())}function F(o,n){1&o&&(t.TgZ(0,"p",32),t._uU(1,"min value is "),t.TgZ(2,"strong"),t._uU(3,"10"),t.qZA()())}function J(o,n){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,y,4,0,"p",21),t.YNc(2,F,4,0,"p",21),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.price?null:e.price.getError("required")),t.xp6(1),t.Q6J("ngIf",null==e.price?null:e.price.getError("min"))}}function N(o,n){1&o&&(t.TgZ(0,"p",32),t._uU(1,"Category is "),t.TgZ(2,"strong"),t._uU(3,"Required"),t.qZA()())}function P(o,n){1&o&&(t.TgZ(0,"p",32),t._uU(1,"Image is "),t.TgZ(2,"strong"),t._uU(3,"Required"),t.qZA()())}function w(o,n){1&o&&(t.TgZ(0,"p",32),t._uU(1,"Description is "),t.TgZ(2,"strong"),t._uU(3,"Required"),t.qZA()())}function k(o,n){1&o&&(t.TgZ(0,"p",32),t._uU(1,"minlength is "),t.TgZ(2,"strong"),t._uU(3,"14"),t.qZA()())}function I(o,n){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,w,4,0,"p",21),t.YNc(2,k,4,0,"p",21),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.desc?null:e.desc.getError("required")),t.xp6(1),t.Q6J("ngIf",null==e.desc?null:e.desc.getError("minlength"))}}function Q(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",33),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.addProduct())}),t._uU(1,"Add Product"),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("disabled",e.addForm.invalid)}}function S(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",34),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.doUpdateProduct())}),t._uU(1,"Update Product"),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("disabled",e.addForm.invalid)}}const Y=[{path:"",redirectTo:"products",pathMatch:"full"},{path:"products",component:(()=>{class o{constructor(e,r){this._ProductService=e,this._FormBuilder=r,this.update=!1,this.base64="",this.products=[],this.total=0,this.getProducts(),this.addForm=this._FormBuilder.group({title:["",[l.kI.required,l.kI.minLength(4)]],price:[0,[l.kI.required,l.kI.min(10)]],cat:["",[l.kI.required]],image:["",[l.kI.required]],desc:["",[l.kI.required,l.kI.minLength(14)]]})}add(){this.update=!1,this.addForm.controls.title.setValue(""),this.addForm.controls.price.setValue(0),this.addForm.controls.desc.setValue(""),this.addForm.controls.cat.setValue("all"),this.addForm.controls.image.setValue(""),this.base64=""}get title(){return this.addForm.get("title")}get price(){return this.addForm.get("price")}get cat(){return this.addForm.get("cat")}get image(){return this.addForm.get("image")}get desc(){return this.addForm.get("desc")}getProducts(){this._ProductService.getAllProducts().subscribe({next:e=>{this.products=e.products,this.products.splice(10,this.products.length-1)}})}getSelectedCat(e){this.addForm.controls.cat.setValue("all"===e?null:e),console.log(this.addForm.get("cat")?.value)}addProduct(){this._ProductService.addProduct({title:this.title?.value}).subscribe({next:r=>{console.log(r),alert("add product success")}})}doUpdateProduct(){this._ProductService.updateProduct({title:this.title?.value},this.temp).subscribe({next:r=>{console.log(r),alert("Update product success")}})}toBase64(e){const r=e.target.files[0],i=new FileReader;i.readAsDataURL(r),i.onload=()=>{this.base64=i.result,this.addForm.controls.image.setValue(this.base64)}}showProduct(e){this.update=!0,this._ProductService.getProductDetails(e).subscribe({next:i=>{this.addForm.controls.title.setValue(i.title),this.addForm.controls.price.setValue(i.price),this.addForm.controls.desc.setValue(i.description),this.addForm.controls.cat.setValue(i.category),this.addForm.controls.image.setValue(i.thumbnail),this.base64=i.thumbnail,this.temp=i.id}})}static#t=this.\u0275fac=function(r){return new(r||o)(t.Y36(b),t.Y36(l.qu))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-allproducts"]],decls:58,vars:11,consts:[[1,"p-5"],[1,"rounded","rounded-1","border","border-1","p-3"],["data-bs-toggle","modal","data-bs-target","#add",1,"btn","btn-success",3,"click"],[1,"table","table-hover","text-center"],[4,"ngFor","ngForOf"],["tabindex","-1","id","add",1,"modal"],[1,"modal-dialog","modal-dialog-centered",2,"min-width","800px"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"form",3,"formGroup"],[1,"row"],[1,"col-md-4"],["for","title"],["type","text","formControlName","title","placeholder","title",1,"form-control"],[4,"ngIf"],["type","number","formControlName","price","placeholder","price",1,"form-control"],["for","category"],[3,"selected","selectedCat"],["class","text-danger m-0 p-0",4,"ngIf"],[1,"my-2"],["for","img",1,"d-block"],["width","100px","alt","",1,"my-2",3,"src"],["type","file","id","img",1,"form-control",3,"change"],["for","desc"],["id","desc","formControlName","desc","cols","20","rows","10",1,"form-control"],["type","submit","class","btn btn-success p-2 rounded rounded-1 d-block ms-auto",3,"disabled","click",4,"ngIf"],["type","submit","class","btn btn-warning p-2 rounded rounded-1 d-block ms-auto",3,"disabled","click",4,"ngIf"],["width","35","height","35",3,"src"],["data-bs-toggle","modal","data-bs-target","#add",1,"btn","btn-warning","p-2","m-2",3,"click"],[1,"text-danger","m-0","p-0"],["type","submit",1,"btn","btn-success","p-2","rounded","rounded-1","d-block","ms-auto",3,"disabled","click"],["type","submit",1,"btn","btn-warning","p-2","rounded","rounded-1","d-block","ms-auto",3,"disabled","click"]],template:function(r,i){if(1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t.NdJ("click",function(){return i.add()}),t._uU(3,"Add Product"),t.qZA(),t.TgZ(4,"div")(5,"table",3)(6,"thead")(7,"tr"),t._UZ(8,"th"),t.TgZ(9,"th"),t._uU(10,"Name"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Price"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Category"),t.qZA(),t._UZ(15,"th"),t.qZA()(),t.TgZ(16,"tbody"),t.YNc(17,v,11,4,"tr",4),t.qZA()()()()(),t.TgZ(18,"div",5)(19,"div",6)(20,"div",7)(21,"div",8)(22,"h5",9),t._uU(23,"Add Product"),t.qZA(),t._UZ(24,"button",10),t.qZA(),t.TgZ(25,"div",11)(26,"form",12)(27,"div",13)(28,"div",14)(29,"label",15),t._uU(30,"Title"),t.qZA(),t._UZ(31,"input",16),t.YNc(32,x,3,2,"div",17),t.qZA(),t.TgZ(33,"div",14)(34,"label",15),t._uU(35,"Price"),t.qZA(),t._UZ(36,"input",18),t.YNc(37,J,3,2,"div",17),t.qZA(),t.TgZ(38,"div",14)(39,"label",19),t._uU(40,"Categories"),t.qZA(),t.TgZ(41,"app-selector",20),t.NdJ("selectedCat",function(c){return i.getSelectedCat(c)}),t.qZA(),t.TgZ(42,"div"),t.YNc(43,N,4,0,"p",21),t.qZA()(),t.TgZ(44,"div",22)(45,"label",23),t._uU(46,"Image"),t.qZA(),t._UZ(47,"img",24),t.TgZ(48,"input",25),t.NdJ("change",function(c){return i.toBase64(c)}),t.qZA(),t.TgZ(49,"div"),t.YNc(50,P,4,0,"p",21),t.qZA()(),t.TgZ(51,"div",22)(52,"label",26),t._uU(53,"Description"),t.qZA(),t._UZ(54,"textarea",27),t.YNc(55,I,3,2,"div",17),t.qZA()(),t.YNc(56,Q,2,1,"button",28),t.YNc(57,S,2,1,"button",29),t.qZA()()()()()),2&r){let s;t.xp6(17),t.Q6J("ngForOf",i.products),t.xp6(9),t.Q6J("formGroup",i.addForm),t.xp6(6),t.Q6J("ngIf",!(null!=i.title&&i.title.valid)&&((null==i.title?null:i.title.touched)||(null==i.title?null:i.title.dirty))),t.xp6(5),t.Q6J("ngIf",!(null!=i.price&&i.price.valid)&&((null==i.price?null:i.price.touched)||(null==i.price?null:i.price.dirty))),t.xp6(4),t.Q6J("selected",null==(s=i.addForm.get("cat"))?null:s.value),t.xp6(2),t.Q6J("ngIf",!(null!=i.cat&&i.cat.value)),t.xp6(4),t.Q6J("src",i.base64,t.LSH),t.xp6(3),t.Q6J("ngIf",!(null!=i.image&&i.image.value)),t.xp6(5),t.Q6J("ngIf",!(null!=i.desc&&i.desc.valid)&&((null==i.desc?null:i.desc.touched)||(null==i.desc?null:i.desc.dirty))),t.xp6(1),t.Q6J("ngIf",!i.update),t.xp6(1),t.Q6J("ngIf",i.update)}},dependencies:[a.sg,a.O5,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.sg,l.u,T]})}return o})()},{path:"cart",component:f},{path:"**",redirectTo:"products",pathMatch:"full"}];let H=(()=>{class o{static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[g.Bz.forChild(Y),g.Bz]})}return o})(),L=(()=>{class o{static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[a.ez]})}return o})(),O=(()=>{class o{static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[a.ez,l.UX]})}return o})(),M=(()=>{class o{static#t=this.\u0275fac=function(r){return new(r||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[a.ez,H,L,O]})}return o})()}}]);